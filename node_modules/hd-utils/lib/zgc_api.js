//http://123.59.55.19:82/CreateHongBao?userid=123&price=123&appid=1001

const util   = require('util')
const http = require("http")

class ZGCAPI {
	constructor(zgc_cfg){

	}

    send_redbag(userid, money, callback){
    	let self = this
        let url = `http://ggsdkpay.ichtx.com:81/CreateHongBao?userid=${userid}&price=${money}&appid=20001&roleid=${userid}`;
		http.get(url, function(req, ress) {
			var json = '';  
			req.on('data', function(data) {
				json += data;  
			});  
			req.on('end', function(){  
				var jsonOBJ = JSON.parse(json);
				if (jsonOBJ.ret == 0) {
					callback(null, jsonOBJ.url);
				}
				else{
					callback(jsonOBJ.errInfo, null)
				}
			});  
		}).on('error', (e) => {
			callback(e.message, null)
        });
    }

}

module.exports = ZGCAPI;